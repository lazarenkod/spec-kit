# Meta-Progression Specification

**Generated by**: `/speckit.games.progression`
**Genre**: {GENRE}
**Meta-Depth**: {META_DEPTH}
**Systems**: {META_SYSTEMS_COUNT}
**Generated**: {TIMESTAMP}

---

## Table of Contents

1. [Overview](#overview)
2. [Prestige System](#1-prestige-system)
3. [Skill Tree](#2-skill-tree)
4. [Account Leveling](#3-account-leveling)
5. [Ascension Mechanics](#4-ascension-mechanics-endgame)
6. [Meta-Progression Summary](#meta-progression-summary)

---

## Overview

This document specifies all meta-progression systems for long-term player retention:

1. **Prestige System** — Soft reset with permanent bonuses
2. **Skill Tree** — Player customization and specialization
3. **Account Leveling** — Permanent account progression
4. **Ascension** — Infinite endgame progression

**Meta-Depth Level**: {META_DEPTH}

{IF_META_DEPTH_BASIC}
- ✅ Prestige System (basic reset loop)
{END_IF}

{IF_META_DEPTH_STANDARD}
- ✅ Prestige System (soft reset loop)
- ✅ {STANDARD_SYSTEM_2} (Skill Tree OR Account Leveling)
{END_IF}

{IF_META_DEPTH_DEEP}
- ✅ Prestige System (soft reset loop)
- ✅ Skill Tree (player customization)
- ✅ Account Leveling (permanent progression)
- ✅ Ascension (infinite endgame)
{END_IF}

---

## 1. Prestige System

### Formula

```python
def prestige_level(total_levels_completed: int) -> int:
    return total_levels_completed // {PRESTIGE_TRIGGER_LEVEL}

def permanent_bonus(prestige_level: int) -> float:
    return 1.0 + (prestige_level * {PRESTIGE_BONUS_RATE})
```

**Parameters**:
- **Trigger Level**: {PRESTIGE_TRIGGER_LEVEL} (prestige every {PRESTIGE_TRIGGER_LEVEL} levels)
- **Bonus Rate**: {PRESTIGE_BONUS_RATE} ({PRESTIGE_BONUS_PERCENTAGE}% per prestige level)

**Examples**:
- Prestige 1 (Level {PRESTIGE_TRIGGER_LEVEL}): +{PRESTIGE_BONUS_PERCENTAGE}% bonuses
- Prestige 2 (Level {PRESTIGE_2_LEVEL}): +{PRESTIGE_2_BONUS}% bonuses
- Prestige 5 (Level {PRESTIGE_5_LEVEL}): +{PRESTIGE_5_BONUS}% bonuses
- Prestige 10 (Level {PRESTIGE_10_LEVEL}): +{PRESTIGE_10_BONUS}% bonuses

---

### Mechanics

#### Soft Reset

**What Player Loses**:
- All level progress (reset to level 1)
- All coins (in-game currency)
- All power-ups (consumable items)
- All temporary buffs/boosts

**What Player Keeps**:
- Prestige level (permanent)
- Stars (prestige currency)
- Account level (permanent)
- Unlocked cosmetics (skins, avatars)
- Friend list / Guild membership

---

#### Permanent Bonuses (Additive)

| Bonus Type | Effect per Prestige Level |
|------------|---------------------------|
| **Coin Earn Rate** | +{COIN_BONUS}% |
| **Power-Up Effectiveness** | +{POWERUP_BONUS}% |
| **XP Earn Rate** | +{XP_BONUS}% |
| **Starting Resources** | +{RESOURCE_BONUS}% |
| **{BONUS_5}** | +{BONUS_5_VALUE}% |

**Example Calculation** (Prestige 5):
- Coin earn rate: 1.0 + (5 × {COIN_BONUS_DECIMAL}) = {PRESTIGE_5_COIN_MULTIPLIER}× ({PRESTIGE_5_COIN_PERCENTAGE}% bonus)
- Power-up effectiveness: {PRESTIGE_5_POWERUP_MULTIPLIER}× ({PRESTIGE_5_POWERUP_PERCENTAGE}% bonus)
- XP earn rate: {PRESTIGE_5_XP_MULTIPLIER}× ({PRESTIGE_5_XP_PERCENTAGE}% bonus)

---

### Prestige Currency: Stars

#### Earn Rate

```python
def stars_earned(prestige_level: int) -> int:
    return prestige_level * {STARS_PER_PRESTIGE}
```

**Examples**:
- Prestige 1: {PRESTIGE_1_STARS} stars
- Prestige 2: {PRESTIGE_2_STARS} stars
- Prestige 5: {PRESTIGE_5_STARS} stars
- Prestige 10: {PRESTIGE_10_STARS} stars

---

#### Star Shop (Permanent Upgrades)

| Item | Cost (Stars) | Effect | Limit |
|------|--------------|--------|-------|
| **{SHOP_ITEM_1}** | {SHOP_COST_1} | {SHOP_EFFECT_1} | {SHOP_LIMIT_1} |
| **{SHOP_ITEM_2}** | {SHOP_COST_2} | {SHOP_EFFECT_2} | {SHOP_LIMIT_2} |
| **{SHOP_ITEM_3}** | {SHOP_COST_3} | {SHOP_EFFECT_3} | {SHOP_LIMIT_3} |
| **{SHOP_ITEM_4}** | {SHOP_COST_4} | {SHOP_EFFECT_4} | {SHOP_LIMIT_4} |
| **{SHOP_ITEM_5}** | {SHOP_COST_5} | {SHOP_EFFECT_5} | {SHOP_LIMIT_5} |

**Total Shop Value**: {TOTAL_SHOP_STARS} stars (to purchase all items)

---

### Prestige Milestones

| Prestige Level | Total Levels | Bonuses | Special Unlocks |
|----------------|--------------|---------|-----------------|
| **Prestige 1** | {PRESTIGE_1_LEVEL} | +{PRESTIGE_1_BONUS}% | {PRESTIGE_1_UNLOCK} |
| **Prestige 2** | {PRESTIGE_2_LEVEL} | +{PRESTIGE_2_BONUS}% | {PRESTIGE_2_UNLOCK} |
| **Prestige 3** | {PRESTIGE_3_LEVEL} | +{PRESTIGE_3_BONUS}% | {PRESTIGE_3_UNLOCK} |
| **Prestige 5** | {PRESTIGE_5_LEVEL} | +{PRESTIGE_5_BONUS}% | {PRESTIGE_5_UNLOCK} |
| **Prestige 10** | {PRESTIGE_10_LEVEL} | +{PRESTIGE_10_BONUS}% | {PRESTIGE_10_UNLOCK} |
| **Prestige 20** | {PRESTIGE_20_LEVEL} | +{PRESTIGE_20_BONUS}% | {PRESTIGE_20_UNLOCK} |

---

### Prestige Incentives

#### Time Reduction (with bonuses)

| Prestige Level | Time to Level {PRESTIGE_TRIGGER_LEVEL} | Speed Increase |
|----------------|----------------------------------------|----------------|
| **First Run** (no prestige) | {FIRST_RUN_TIME} hours | - |
| **Prestige 1** (+{PRESTIGE_1_BONUS}%) | {PRESTIGE_1_TIME} hours | {PRESTIGE_1_SPEED}% faster |
| **Prestige 5** (+{PRESTIGE_5_BONUS}%) | {PRESTIGE_5_TIME} hours | {PRESTIGE_5_SPEED}% faster |
| **Prestige 10** (+{PRESTIGE_10_BONUS}%) | {PRESTIGE_10_TIME} hours | {PRESTIGE_10_SPEED}% faster |

**Power Fantasy**:
- Early levels become trivial (one-shot enemies)
- Player feels god-like progression
- Satisfying "I was weak, now I'm strong" loop

---

## 2. Skill Tree

{IF_META_DEPTH_STANDARD_OR_DEEP}

### Architecture

- **Branches**: {SKILL_TREE_BRANCHES} ({BRANCH_NAMES})
- **Total Nodes**: {TOTAL_NODES} ({NODES_PER_BRANCH} per branch)
- **Max Depth**: {MAX_DEPTH} tiers per branch
- **Unlock**: Level {SKILL_TREE_UNLOCK_1} (first branch), {SKILL_TREE_UNLOCK_2} (second), {SKILL_TREE_UNLOCK_3} (third)

---

### Branch 1: {BRANCH_1_NAME}

| Tier | Node Name | Cost (Stars) | Effect | Requires |
|------|-----------|--------------|--------|----------|
| 1 | {B1_T1_NAME} | {B1_T1_COST} | {B1_T1_EFFECT} | None |
| 2 | {B1_T2_NAME} | {B1_T2_COST} | {B1_T2_EFFECT} | Tier 1 |
| 3 | {B1_T3_NAME} | {B1_T3_COST} | {B1_T3_EFFECT} | Tier 2 |
| 4 | {B1_T4_NAME} | {B1_T4_COST} | {B1_T4_EFFECT} | Tier 3 |
| 5 | {B1_T5_NAME} | {B1_T5_COST} | {B1_T5_EFFECT} | Tier 4 |
| 6 | {B1_T6_NAME} | {B1_T6_COST} | {B1_T6_EFFECT} | Tier 5 |
| 7 | {B1_T7_NAME} | {B1_T7_COST} | {B1_T7_EFFECT} | Tier 6 |
| 8 | {B1_T8_NAME} | {B1_T8_COST} | {B1_T8_EFFECT} | Tier 7 |
| 9 | {B1_T9_NAME} | {B1_T9_COST} | {B1_T9_EFFECT} | Tier 8 |
| 10 | {B1_T10_NAME} | {B1_T10_COST} | {B1_T10_EFFECT} | Tier 9 |

**Total Cost** (Branch 1): {BRANCH_1_TOTAL_COST} stars

---

### Branch 2: {BRANCH_2_NAME}

| Tier | Node Name | Cost (Stars) | Effect | Requires |
|------|-----------|--------------|--------|----------|
| 1 | {B2_T1_NAME} | {B2_T1_COST} | {B2_T1_EFFECT} | None |
| 2 | {B2_T2_NAME} | {B2_T2_COST} | {B2_T2_EFFECT} | Tier 1 |
| 3 | {B2_T3_NAME} | {B2_T3_COST} | {B2_T3_EFFECT} | Tier 2 |
| 4 | {B2_T4_NAME} | {B2_T4_COST} | {B2_T4_EFFECT} | Tier 3 |
| 5 | {B2_T5_NAME} | {B2_T5_COST} | {B2_T5_EFFECT} | Tier 4 |
| 6 | {B2_T6_NAME} | {B2_T6_COST} | {B2_T6_EFFECT} | Tier 5 |
| 7 | {B2_T7_NAME} | {B2_T7_COST} | {B2_T7_EFFECT} | Tier 6 |
| 8 | {B2_T8_NAME} | {B2_T8_COST} | {B2_T8_EFFECT} | Tier 7 |
| 9 | {B2_T9_NAME} | {B2_T9_COST} | {B2_T9_EFFECT} | Tier 8 |
| 10 | {B2_T10_NAME} | {B2_T10_COST} | {B2_T10_EFFECT} | Tier 9 |

**Total Cost** (Branch 2): {BRANCH_2_TOTAL_COST} stars

---

### Branch 3: {BRANCH_3_NAME}

| Tier | Node Name | Cost (Stars) | Effect | Requires |
|------|-----------|--------------|--------|----------|
| 1 | {B3_T1_NAME} | {B3_T1_COST} | {B3_T1_EFFECT} | None |
| 2 | {B3_T2_NAME} | {B3_T2_COST} | {B3_T2_EFFECT} | Tier 1 |
| 3 | {B3_T3_NAME} | {B3_T3_COST} | {B3_T3_EFFECT} | Tier 2 |
| 4 | {B3_T4_NAME} | {B3_T4_COST} | {B3_T4_EFFECT} | Tier 3 |
| 5 | {B3_T5_NAME} | {B3_T5_COST} | {B3_T5_EFFECT} | Tier 4 |
| 6 | {B3_T6_NAME} | {B3_T6_COST} | {B3_T6_EFFECT} | Tier 5 |
| 7 | {B3_T7_NAME} | {B3_T7_COST} | {B3_T7_EFFECT} | Tier 6 |
| 8 | {B3_T8_NAME} | {B3_T8_COST} | {B3_T8_EFFECT} | Tier 7 |
| 9 | {B3_T9_NAME} | {B3_T9_COST} | {B3_T9_EFFECT} | Tier 8 |
| 10 | {B3_T10_NAME} | {B3_T10_COST} | {B3_T10_EFFECT} | Tier 9 |

**Total Cost** (Branch 3): {BRANCH_3_TOTAL_COST} stars

---

### Skill Tree Totals

- **Full Tree Cost**: {FULL_TREE_COST} stars (all {TOTAL_NODES} nodes)
- **Single Branch Cost**: {SINGLE_BRANCH_COST} stars (average)
- **Average Completion Time**: ~{TREE_COMPLETION_PRESTIGES} prestiges (~{TREE_COMPLETION_LEVELS} levels)

---

### Respec

**Cost**: {RESPEC_COST} stars (refund {RESPEC_REFUND}% of spent stars)
**Limit**: {RESPEC_LIMIT}

**Mechanics**:
- Player can reset all skill tree nodes
- Receives {RESPEC_REFUND}% of spent stars back
- Encourages experimentation and build diversity

{END_IF_META_DEPTH_STANDARD_OR_DEEP}

---

## 3. Account Leveling

{IF_META_DEPTH_STANDARD_OR_DEEP}

### XP Formula

```python
def xp_required(account_level: int) -> int:
    return {XP_BASE} * (account_level ** {XP_EXPONENT})
```

**Parameters**:
- **Base XP**: {XP_BASE}
- **Exponent**: {XP_EXPONENT} (controls scaling curve)

**Examples**:
- Level 1 → 2: {XP_1_TO_2} XP
- Level 2 → 3: {XP_2_TO_3} XP
- Level 10 → 11: {XP_10_TO_11} XP
- Level 50 → 51: {XP_50_TO_51} XP
- Level 100 → 101: {XP_100_TO_101} XP

---

### XP Sources

| Source | XP Earned |
|--------|-----------|
| **Complete Level** | `{BASE_XP} + (level_number × {XP_PER_LEVEL})` |
| **First-Time Completion** | `base_xp × {FIRST_TIME_MULTIPLIER}` |
| **3-Star Completion** | `base_xp × {THREE_STAR_MULTIPLIER}` |
| **Daily Challenge** | {DAILY_CHALLENGE_XP} XP each |
| **Prestige** | {PRESTIGE_XP} XP |
| **Boss Defeat** | {BOSS_XP} XP |
| **Ascension Milestone** | {ASCENSION_XP} XP |

---

### Rewards per Account Level

| Frequency | Reward |
|-----------|--------|
| **Every Level** | {EVERY_LEVEL_REWARD} |
| **Every 5 Levels** | {EVERY_5_REWARD} |
| **Every 10 Levels** | {EVERY_10_REWARD} |
| **Every 25 Levels** | {EVERY_25_REWARD} |
| **Every 50 Levels** | {EVERY_50_REWARD} |
| **Every 100 Levels** | {EVERY_100_REWARD} |

---

### Account Level Benefits

#### Permanent Stat Boosts

```python
def stat_boost(account_level: int) -> float:
    return 1.0 + (account_level * {STAT_BOOST_PER_LEVEL})
```

**Effect**: +{STAT_BOOST_PERCENTAGE}% all stats per account level

**Examples**:
- Account Level 10: +{ACCOUNT_10_BOOST}% all stats
- Account Level 50: +{ACCOUNT_50_BOOST}% all stats
- Account Level 100: +{ACCOUNT_100_BOOST}% all stats

---

#### Feature Unlocks

| Account Level | Unlock |
|---------------|--------|
| **Level {FRIENDS_UNLOCK}** | {FRIENDS_FEATURE} |
| **Level {GUILDS_UNLOCK}** | {GUILDS_FEATURE} |
| **Level {ASCENSION_UNLOCK}** | {ASCENSION_FEATURE} |
| **Level {ULTIMATE_UNLOCK}** | {ULTIMATE_FEATURE} |

---

#### Prestige Efficiency

```python
def prestige_star_bonus(account_level: int) -> float:
    return 1.0 + (account_level // 10) * {PRESTIGE_EFFICIENCY_BONUS}
```

**Effect**: +{PRESTIGE_EFFICIENCY_PERCENTAGE}% stars earned per 10 account levels

**Examples**:
- Account Level 10: +{ACCOUNT_10_STARS}% star earn rate
- Account Level 50: +{ACCOUNT_50_STARS}% star earn rate
- Account Level 100: +{ACCOUNT_100_STARS}% star earn rate

{END_IF_META_DEPTH_STANDARD_OR_DEEP}

---

## 4. Ascension Mechanics (Endgame)

{IF_META_DEPTH_DEEP}

### Unlock Conditions

- ✅ Account level {ASCENSION_ACCOUNT_LEVEL_REQ}+
- ✅ Prestige level {ASCENSION_PRESTIGE_REQ}+
- ✅ Complete level {ASCENSION_LEVEL_REQ}

---

### Ascension Mechanics

#### Infinite Progression

- **No Level Cap**: Endless progression
- **Procedural Generation**: Levels generated on-the-fly
- **Exponential Scaling**: Difficulty increases exponentially

---

#### Ascension Formula

```python
def ascension_difficulty(ascension_level: int) -> float:
    base_difficulty = {ASCENSION_BASE_DIFFICULTY}
    return base_difficulty * ({ASCENSION_SCALING_BASE} ** ascension_level)
```

**Parameters**:
- **Base Difficulty**: {ASCENSION_BASE_DIFFICULTY} (Level {ASCENSION_LEVEL_REQ} difficulty)
- **Scaling Base**: {ASCENSION_SCALING_BASE} (exponential multiplier)

**Examples**:
- Ascension 1: {ASCENSION_1_DIFFICULTY} difficulty ({ASCENSION_1_MULTIPLIER}× level {ASCENSION_LEVEL_REQ})
- Ascension 5: {ASCENSION_5_DIFFICULTY} difficulty ({ASCENSION_5_MULTIPLIER}× level {ASCENSION_LEVEL_REQ})
- Ascension 10: {ASCENSION_10_DIFFICULTY} difficulty ({ASCENSION_10_MULTIPLIER}× level {ASCENSION_LEVEL_REQ})
- Ascension 20: {ASCENSION_20_DIFFICULTY} difficulty ({ASCENSION_20_MULTIPLIER}× level {ASCENSION_LEVEL_REQ})

---

### Ascension Bonuses

#### Permanent Multipliers

| Bonus Type | Multiplier |
|------------|------------|
| **Coin Earn Rate** | {ASCENSION_COIN_MULTIPLIER}× |
| **XP Earn Rate** | {ASCENSION_XP_MULTIPLIER}× |
| **Star Earn Rate** | {ASCENSION_STAR_MULTIPLIER}× |
| **{ASCENSION_BONUS_4}** | {ASCENSION_BONUS_4_VALUE}× |

---

#### Exclusive Power-Ups

| Power-Up | Effect | Uses per Ascension Run |
|----------|--------|------------------------|
| **{ASCENSION_POWERUP_1}** | {ASCENSION_POWERUP_1_EFFECT} | {ASCENSION_POWERUP_1_USES} uses |
| **{ASCENSION_POWERUP_2}** | {ASCENSION_POWERUP_2_EFFECT} | {ASCENSION_POWERUP_2_USES} uses |
| **{ASCENSION_POWERUP_3}** | {ASCENSION_POWERUP_3_EFFECT} | {ASCENSION_POWERUP_3_USES} uses |

---

#### Leaderboard

**Global Ranking**:
- Highest ascension level reached
- Weekly / monthly / all-time leaderboards
- Top {LEADERBOARD_TOP_COUNT} players get exclusive rewards

**Leaderboard Rewards**:
- **Top 10**: {LEADERBOARD_TOP_10_REWARD}
- **Top 100**: {LEADERBOARD_TOP_100_REWARD}
- **Top 1000**: {LEADERBOARD_TOP_1000_REWARD}

---

### Ascension Incentives

**Competitive Play**:
- Showcase mastery and dedication
- Compete with top players globally
- Seasonal leaderboard resets

**Infinite Replayability**:
- Always a higher level to reach
- No ceiling on progression
- Perfect for streamers / content creators

**Prestige Acceleration**:
- Ascension bonuses stack with prestige bonuses
- Prestige runs become {ASCENSION_PRESTIGE_SPEED}% faster at ascension {ASCENSION_PRESTIGE_SPEED_LEVEL}
- Encourages prestige loop (ascend → prestige → ascend higher)

{END_IF_META_DEPTH_DEEP}

---

## Meta-Progression Summary

### Systems Overview

| System | Unlock Level | Purpose | Completion Time |
|--------|--------------|---------|-----------------|
| **Prestige** | {PRESTIGE_TRIGGER_LEVEL} | Soft reset loop | Infinite ({PRESTIGE_SUMMARY_COUNT} prestiges = ~{PRESTIGE_SUMMARY_LEVELS} levels) |
{IF_SKILL_TREE}
| **Skill Tree** | {SKILL_TREE_UNLOCK_1} | Player customization | ~{TREE_COMPLETION_LEVELS} levels ({TREE_COMPLETION_PRESTIGES} prestiges) |
{END_IF}
{IF_ACCOUNT_LEVELING}
| **Account Leveling** | 0 (always active) | Permanent progression | ~{ACCOUNT_LEVELING_COMPLETION} levels (account level {ACCOUNT_MAX_LEVEL}) |
{END_IF}
{IF_ASCENSION}
| **Ascension** | {ASCENSION_LEVEL_REQ} | Infinite endgame | Infinite (exponential scaling) |
{END_IF}

---

### Total Meta-Progression Depth

| Player Type | Time Investment | Description |
|-------------|-----------------|-------------|
| **Casual** | ~{CASUAL_TIME} hours | Complete {PRESTIGE_TRIGGER_LEVEL} levels (no prestige) |
| **Mid-Core** | ~{MIDCORE_TIME} hours | {MIDCORE_PRESTIGES} prestiges + skill tree progress |
| **Hardcore** | {HARDCORE_TIME}+ hours | Full skill tree + ascension endgame |

---

### Retention Impact

**Expected Retention Improvements**:
- **Day 30 Retention**: +{D30_IMPROVEMENT}% (prestige incentive)
- **Day 90 Retention**: +{D90_IMPROVEMENT}% (skill tree + account leveling)
- **Day 180 Retention**: +{D180_IMPROVEMENT}% (ascension endgame)

**Monetization Hooks**:
- Prestige boosts (pay to accelerate prestige runs)
- Skill tree respec (premium respec for experimentation)
- Account XP boosts (level faster, unlock features sooner)
- Ascension power-ups (exclusive ascension consumables)

---

## Implementation Notes

### Technical Requirements

1. **Persistent Storage**:
   - Prestige level, stars earned
   - Skill tree node states (unlocked/locked)
   - Account level, total XP
   - Ascension level, highest reached

2. **Server-Side Validation**:
   - Prestige triggers (prevent cheating)
   - Star shop purchases (validate costs)
   - Leaderboard scores (anti-cheat)

3. **Client-Side Display**:
   - Prestige progress UI (levels until next prestige)
   - Skill tree visualization (interactive node graph)
   - Account level progress bar
   - Ascension leaderboard

---

### Balance Testing Checklist

- [ ] Prestige bonuses feel impactful (50%+ faster at prestige 5)
- [ ] Skill tree nodes are meaningful (noticeable effect)
- [ ] Account leveling rewards are exciting (not just coins)
- [ ] Ascension difficulty scales appropriately (not impossibly hard)
- [ ] Star economy is balanced (enough stars to progress, not too many)
- [ ] Respec cost is fair (encourages experimentation)

---

**Version**: 1.0.0
**Generated**: {TIMESTAMP}
**Command**: `/speckit.games.progression --genre {GENRE} --meta-depth {META_DEPTH}`
**Agent**: meta-progression-agent
**Model**: opus (thinking_budget: 24000)

---

**End of Meta-Progression Specification**
